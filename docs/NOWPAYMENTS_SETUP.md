# Настройка NowPayments для приема платежей

Этот документ описывает процесс настройки NowPayments для приема платежей в проекте.

## Регистрация и настройка аккаунта

1. Зарегистрируйтесь на [NowPayments](https://nowpayments.io/)
2. Подтвердите свой аккаунт и пройдите процесс верификации
3. Создайте API ключ в разделе "API Keys"
4. Сохраните API ключ в надежном месте

## Настройка магазина

1. Перейдите в раздел "Store Settings"
2. Настройте название магазина и другие параметры
3. Укажите валюты, которые вы хотите принимать
4. Настройте адреса кошельков для получения платежей

## Настройка уведомлений о платежах (IPN)

1. Перейдите в раздел "IPN Settings"
2. Добавьте URL для обратных вызовов: `https://your-n8n-url/webhook/payment-callback`
3. Настройте секретный ключ для проверки подлинности уведомлений

## Интеграция с n8n

1. В n8n создайте новый рабочий процесс для обработки уведомлений о платежах
2. Используйте webhook для приема уведомлений от NowPayments
3. Добавьте проверку подписи для подтверждения подлинности уведомлений
4. Настройте логику обработки успешных платежей (например, отправка доступа к курсу)

## Тестирование

1. Используйте тестовый режим NowPayments для проверки интеграции
2. Создайте тестовый инвойс и проведите тестовый платеж
3. Убедитесь, что уведомления о платежах приходят в n8n
4. Проверьте, что логика обработки платежей работает корректно

## Переход в боевой режим

1. После успешного тестирования переключите NowPayments в боевой режим
2. Обновите API ключи и URL в конфигурации n8n
3. Проведите финальное тестирование с реальным платежом небольшой суммы

## Мониторинг и поддержка

1. Регулярно проверяйте статус платежей в панели управления NowPayments
2. Настройте уведомления о проблемах с платежами
3. Имейте план действий на случай технических проблем

## Полезные ссылки

- [Документация NowPayments API](https://nowpayments.io/doc/)
- [Руководство по интеграции](https://nowpayments.io/help/)
- [Поддержка NowPayments](https://nowpayments.io/support)